!function(){if(document.querySelector(".navbar")){var e=document.querySelector(".navbar"),s=e.querySelector(".navbar__header"),t=e.querySelector(".navbar__nav"),r=e.querySelector(".navbar__toggle"),n=e.querySelector(".navbar__lines"),i=1;r.addEventListener("click",function(e){e.preventDefault(),i++,i%2?i%2&&(s.classList.remove("navbar__header--active"),n.classList.remove("navbar__lines--cross"),t.classList.remove("navbar__nav--drop-down")):(s.classList.add("navbar__header--active"),n.classList.add("navbar__lines--cross"),t.classList.add("navbar__nav--drop-down"))})}}(),function(){if(document.querySelector(".reviews-slider")){var e=document.querySelector(".reviews-slider"),s=e.querySelectorAll(".reviews-slider__control"),t=s[0],r=s[1],n=s[2],i=e.querySelector(".reviews-slider__btn-next"),o=e.querySelector(".reviews-slider__btn-prev"),a=e.querySelector(".reviews-slider__slides"),l=0;a.classList.add("reviews-slider__slides--show-first"),t.addEventListener("click",function(){a.classList.remove("reviews-slider__slides--show-second"),a.classList.remove("reviews-slider__slides--show-third"),a.classList.add("reviews-slider__slides--show-first")}),r.addEventListener("click",function(){a.classList.remove("reviews-slider__slides--show-first"),a.classList.remove("reviews-slider__slides--show-third"),a.classList.add("reviews-slider__slides--show-second")}),n.addEventListener("click",function(){a.classList.remove("reviews-slider__slides--show-first"),a.classList.remove("reviews-slider__slides--show-second"),a.classList.add("reviews-slider__slides--show-third")}),o.classList.add("reviews-slider__btn-prev--disabled"),i.addEventListener("click",function(e){e.preventDefault(),l++,l>2&&(l=2),1==l&&(a.classList.remove("reviews-slider__slides--show-first"),a.classList.add("reviews-slider__slides--show-second"),o.classList.remove("reviews-slider__btn-prev--disabled")),2==l&&(a.classList.remove("reviews-slider__slides--show-second"),a.classList.add("reviews-slider__slides--show-third"),i.classList.add("reviews-slider__btn-next--disabled"))}),o.addEventListener("click",function(e){e.preventDefault(),l--,0>l&&(l=0),0==l&&(a.classList.remove("reviews-slider__slides--show-second"),a.classList.add("reviews-slider__slides--show-first"),o.classList.add("reviews-slider__btn-prev--disabled")),1==l&&(a.classList.remove("reviews-slider__slides--show-third"),a.classList.add("reviews-slider__slides--show-second"),i.classList.remove("reviews-slider__btn-next--disabled"))})}}(),function(){if(document.querySelector(".time")){moment().format();var e=document.querySelector("[name=departure-date]"),s=document.querySelector("[name=duration]"),t=(document.querySelector("[name=return-date]"),moment(e.value));console.log(t);var r=+s.value;console.log(r)}}(),function(){function e(e,s){var t=e.querySelector(".btn--minus"),r=e.querySelector(".btn--plus"),n=e.querySelector("[type=number]");n.value=s,t.addEventListener("click",function(e){e.preventDefault(),n.value>0&&n.value--}),r.addEventListener("click",function(e){e.preventDefault(),n.value++})}function s(e,s){var t=e.querySelector(".btn--minus"),r=e.querySelector(".btn--plus"),a=e.querySelector("[type=number]");a.value=s,t.addEventListener("click",function(e){e.preventDefault(),a.value>0&&a.value--;var s=document.querySelector(".companions__item:last-child");n.removeChild(s)}),r.addEventListener("click",function(e){e.preventDefault(),a.value++;var s=document.createElement("li");s.classList.add("companions__item"),s.innerHTML=Mustache.render(i,{"number-$":o.value,"companion-name-$":"companion-name-"+o.value,"companion-niсkname-$":"companion-niсkname-"+o.value}),n.appendChild(s)})}if(document.querySelector(".time__btns-group")){var t=document.querySelector(".time__btns-group"),r=document.querySelector(".companions__btns-group"),n=document.querySelector(".companions__list"),i=(document.querySelector(".companions__item"),document.querySelector("#companion-template").innerHTML),o=document.querySelector("[name=companions-amount]"),a=document.querySelectorAll(".btn--companions");e(t,"10"),s(r,"2");for(var l=0;l<a.lenght;l++){var c=a[l];c.addEventListener("click",function(e){e.preventDefault,console.log("По клику ничего не происходит");var s=c.parentNode;console.log(s)})}}}(),function(){function e(e,s){var t=new XMLHttpRequest,r=(new Date).getTime();t.open("post","https://echo.htmlacademy.ru/adaptive?"+r),t.addEventListener("readystatechange",function(){4==t.readyState&&s(t.responseText)}),t.send(e)}function s(e){if(e.type.match(/image.*/)){var s=new FileReader;s.addEventListener("load",function(s){var r=Mustache.render(i,{image:s.target.result,name:e.name}),a=document.createElement("li");a.classList.add("photos__item"),a.innerHTML=r,n.appendChild(a),a.querySelector(".btn--cross").addEventListener("click",function(e){e.preventDefault(),t(a)}),o.push({file:e,li:a})}),s.readAsDataURL(e)}}function t(e){o=o.filter(function(s){return s.li!=e}),e.parentNode.removeChild(e)}if("FormData"in window&&document.querySelector(".story-form form")){var r=document.querySelector(".story-form form"),n=document.querySelector(".photos__list"),i=document.querySelector("#image-template").innerHTML,o=[];r.addEventListener("submit",function(s){s.preventDefault();var t=new FormData(r);o.forEach(function(e){t.append("images",e.file)}),e(t,function(e){console.log(e),a.classList.add("popup-success--show")})}),"FileReader"in window&&r.querySelector("#upload-photos").addEventListener("change",function(){for(var e=this.files,t=0;t<e.length;t++)s(e[t]);this.value=""});for(var a=document.querySelector(".popup-success"),l=document.querySelector(".popup-failure"),c=document.querySelectorAll(".btn--popup"),d=0;d<c.length;d++){var u=c[d];u.addEventListener("click",function(e){e.preventDefault(),a.classList.contains("popup-success--show")&&a.classList.remove("popup-success--show"),l.classList.contains("popup-failure--show")&&l.classList.remove("popup-failure--show")})}}}(),function(){function e(){var e={zoom:16,center:new google.maps.LatLng(59.936352,30.321097),disableDefaultUI:!0,scrollwheel:!1},s=new google.maps.Map(document.getElementById("map"),e),t="img/img_map-marker.png",r=new google.maps.LatLng(59.936352,30.321097);new google.maps.Marker({position:r,map:s,icon:t})}document.querySelector(".map")&&google.maps.event.addDomListener(window,"load",e)}();
